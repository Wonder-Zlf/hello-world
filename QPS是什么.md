# QPS是什么

## 1、基本概念

PV=page view 

指页面浏览次数，用户任意一次打开界面，PV就加一

QPS=queries per second

每秒查询数，每秒系统能够处理的查询请求次数



TPS=transactions per second

每秒事务数，是每秒钟系统能够处理的事务次数



百度百科：

每秒查询率（QPS，Queries-per-second）是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准



## 2、统计QPS的方式

QPS可以用http_load进行统计

QPS=总请求数/(进程总数*请求时间)，单个进程每秒请求服务器的成功次数



单台服务器每天最大PV计算：

公式：每天最大PV=QPSx3600x24



服务器计算：

服务器数量=每天最大PV/单台服务器每天最大PV



## 3、峰值QPS和机器计算公式

原理：每天80%的访问集中在每天20%的时间，这20%的时间就是峰值时间

公式：（总PV数*80%）/（每天秒数 *20%）=峰值时间每秒请求数-峰值QPS

机器：峰值时间每秒QPS/单台机器的QPS = 需求的机器



例题：

每天300w PV的在单台机器上，这台机器的QPS必须达到多少？
3000000*0.8/(3600 *24 *0.2)=139 ——每秒必须响应139个以上的请求

如果一台机器的QPS是58，需求几台机器支持？

139/58=3——至少需要3台机器



## 4、TPS是什么

TPS

一个事务是指一个客户机向服务器发送请求然后服务器做出反应的过程。客户机在发送请求时开始计时，收到服务器响应后结束计时，以此来计算使用的时间和完成的事务个数。

TPS和QPS的关系

如果对一个页面请求一次，形成一个tps，但一次页面请求，可能产生多次对服务器的请求（页面上有很多资源，比如图片等），服务器对这些请求，就可计入“qps”之中；

但是，如今的项目基本上都是前后端分离的，性能也分为前端性能和后端性能，通常默认是后端性能，即服务端性能，也就是对服务端接口做压测。